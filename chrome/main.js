function loopPosts(o){for(i=0;i<20;i++){var e=o.data;if("undefined"==typeof e[i].cover)var c=e[i].link;else var c="http://i.imgur.com/"+e[i].cover+"l.jpg";var t=e[i].link,n=e[i].title,r=e[i].views;if(null===e[i].description)var a="";else var a=e[i].description;var l='<li><a href="'+t+'"><img src="'+c+'" alt="'+n+'"><h2>'+n+"</h2><p>"+a+"</p><p>ðŸ‘€  "+r+"</p></a></li>";$(".oc-list").append(l)}}function fetch(o){var e={type:"GET",url:"https://api.imgur.com/3/gallery/"+o+"/top/day/0?showViral=false",beforeSend:function(o){o.setRequestHeader("Authorization","Client-ID b4746d5cae4ee59")}};$.ajax(e).done(function(o){$(".oc-loading").remove(),loopPosts(o)}).fail(function(){alert("error")})}function removeProdEl(){$("#oc-box").attr("checked",!0),$(".oc-nav").remove(),$(".oc-list").remove(),$(".oc-loading").remove(),$(".oc").append('<img src="off.png" class="oc-off" alt="">'),console.log("el suppr")}function checkSectionStorage(){chrome.storage.local.get("section",function(o){section=o.section,"user"==section?(fetch("user"),$(".oc-nav-fp").removeClass("active"),$(".oc-nav-us").addClass("active")):(fetch("hot"),$(".oc-nav-us").removeClass("active"),$(".oc-nav-fp").addClass("active"))})}function checkProdStorage(){chrome.storage.local.get("productivity",function(o){prod=o.productivity,"on"==prod?(console.log("nothing"),removeProdEl()):(console.log("go for it!"),checkSectionStorage())})}$(".oc-nav-fp").on("click",function(){chrome.storage.local.clear(function(){var o=chrome.runtime.lastError;o&&console.error(o)}),chrome.storage.local.set({section:"hot"},function(){console.log("Settings saved"),window.location.reload()})}),$(".oc-nav-us").on("click",function(){chrome.storage.local.clear(function(){var o=chrome.runtime.lastError;o&&console.error(o)}),chrome.storage.local.set({section:"user"},function(){console.log("Settings saved"),window.location.reload()})}),$("#oc-box").click(function(){$(this).is(":checked")?chrome.storage.local.set({productivity:"on"},function(){console.log("Settings saved"),removeProdEl()}):chrome.storage.local.set({productivity:"off"},function(){console.log("Settings saved"),window.location.reload()})}),$(document).ready(function(){checkProdStorage(),console.log("done")});